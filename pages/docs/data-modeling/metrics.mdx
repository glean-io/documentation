# Calculating Metrics

Metrics are measurements that can go up and down over time.
Each metric should map to a measurement of a process or workflow in your organization.
Counts of events, revenues and cycle times are good examples of metrics you may want to add to your data model.

You will setup and update metrics from the [Add Data Model](/docs/data-modeling/add-data-model) workflow.

## Types of metrics

| Name           | Input Column Type        | Description                                                                                                                |
| -------------- | ------------------------ | -------------------------------------------------------------------------------------------------------------------------- |
| row count      | No input column required | Count of rows.                                                                                                             |
| custom metric  | No input column required | A SQL-based custom aggregation. See [Custom SQL Metrics](/docs/data-modeling/metrics#custom-sql-metrics) for more details. |
| count          | String or Numeric        | SQL `COUNT()`. Counts the number of non-null values in a column.                                                           |
| count distinct | String or Numeric        | SQL `COUNT(DISTINCT)`. Counts the number of unique, non-null values in a column.                                           |
| min            | Numeric                  | SQL `MIN()`. Finds the minimum value of a column.                                                                          |
| max            | Numeric                  | SQL `MAX()`. Finds the maximum value of a column.                                                                          |
| avg            | Numeric                  | SQL `AVG()`. Finds the arithmetic mean of a column.                                                                        |

## The row count metric

The row count metric is added by default to a data model and can't be removed. This is intentional - see the best practices for defining this metric in the [Data Modeling Best Practices](/docs/data-modeling/best-practices).

## Column aggregations

The simplest type of metric. See table above for which functions you can run on specific metrics.

To add a column aggregating metric:

1. Go to the [Add Data Model](/docs/data-modeling/add-data-model) workflow by creating a new data model or editing an existing model.
2. In the list of fields, click `Add metric` next to the name of the field you'd like to aggregate.
3. Click on the new item in the Metric list to expand the and select the aggregation type.

## Custom SQL metrics

Custom SQL metrics allow you to have more involved custom aggregations in Glean like weighted averages or proportions and other formulas. You can define a custom metric as any [aggregating function](https://www.datacamp.com/community/tutorials/aggregate-functions-sql) that results in a numeric value.

To add a custom metric:

1. Go to the [Add Data Model](/docs/data-modeling/add-data-model) workflow by creating a new data model or editing an existing model.
2. Under the Metrics section click the `+ Add Custom Metric` button.
3. Enter your aggregation and click the ðŸ”„ button to test the SQL.

### Using joined columns in metric SQL

It's possible to write custom metric SQL that utilizes columns from joined models. However, if you write the following query:

```
count(DISTINCT id)
```

and the `id` column is not unique across joined models, the SQL won't be valid. This can solved by doing the following:

1. Set an `alias` field on the model that owns the column you are trying to reference. This can be done via the YML Editor in the UI, or via Data Ops:
```
alias: customers_model
```
2. Use the alias you just set as a table name in the custom SQL you wrote:
```
count(DISTINCT customers_model.id)
```

This should ensure that the custom metric SQL is referencing the column you intended.
