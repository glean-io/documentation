import { Cards, Card } from 'nextra-theme-docs'

# Build

The `build` command in Glean transforms your configuration files into Glean resources.  A build can be either deployed to your project to update your resources, or you can generate a preview build.  You can choose to either deploy these resources with the `--deploy` flag or the default behavior is to just create a preview build.

There are two aliases for build `glean deploy` and `glean preview`.  `glean preview` is identical to `glean build` except that there's no deploy option.   `glean build --deploy` is identical to `glean deploy --no-preview` (since `deploy` will do a validating).

All of these options work for `build`, `preview` and `deploy`.

<Cards num={2}>
  <Card arrow icon=" 🏗️ " title="preview" href="./preview">
    <div>Preview builds create a containerized and isolated fork of your project where you can see applied changes.</div>
  </Card>
  <Card arrow icon=" 🚀 " title="deploy" href="./deploy">
  </Card>
</Cards>

## Examples

These examples assume you have glean files you are working with.  See the [quickstart guide](/docs/data-ops/cli#quickstart) and [schema documentation](/docs/data-ops/config-schema/data-models).  You can also use the [pull](./pull) command;

```bash filename="terminal"
# generate a manifest and use it to build glean models
glean build --dbt

# manually pass in a manifest file, it was generated by running dbt command seperately
glean build --dbt-manifest=./dbt/target/manifest.json

# deploy to production, from a git branch
glean build --deploy --git-revision=main --git-path=data/glean
```

## dbt workflows

[See the dbt integration docs](/docs/data-ops/dbt-integration).

Glean can build your dbt models into Glean models automatically, making it easy to keep your dbt project in sync with Glean and preventing broken dashboards.  

`--dbt` flag assumes that you're running the glean command from your dbt directory.  It will run dbt parse (to update your dbt manifest file) and then automatically look for your manifest file at `target/manifest.json`.  If you don't want to automatically run `dbt parse` you can use the --dbt-manifest flag above.
`--dbt-manifest` lets you pass a dbt manifest file into Glean, Glean will look for glean model metadata in the dbt models and build corresponding Glean models.


## Git workflows

[See the git integration](/docs/data-ops/git-integration).

- `--git-revision [git branch, tag or commit hash]`: If specified, Glean will pull configuration files from your configured git repository at the provided commit, instead of using local files. Any revision that can be used with git checkout will work here: so branches and tags also work.
- `--git-path [path]`: A path within your git repo that will be used as the top-level directory for the build. This is only applicable when also using the `--git-revision` flag.


## Empty builds

By default, glean prevents you from building empty projects, becasue this is usually a mistake (and coudl result in deleting resources).  To get around this, you can pass in the flag `--allow-dangerous-empty-build`
